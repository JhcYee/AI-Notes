You are debugging a PDF viewer in a web app. Chrome is blocking the PDF render inside an iframe.

Current architecture:
- PDFs are stored in the DB as base64.
- Viewer uses an <iframe> that loads /api/documents/:id/content
- Server reads base64, converts to binary, and streams it with PDF headers.

Problem:
- Chrome still blocks viewing the PDF in the iframe.

Goal:
- Make the PDF render reliably in Chrome (and other browsers) without security blocks.

What to do:
1) Identify why Chrome is blocking the iframe load.
   - Reproduce in Chrome and check DevTools:
     - Console error message (copy exact text)
     - Network tab for /api/documents/:id/content: status code, redirect chain, and response headers
2) Fix the most likely causes in this order:
   A) Framing restrictions:
      - Check response headers for:
        - X-Frame-Options (DENY / SAMEORIGIN)
        - Content-Security-Policy with frame-ancestors
      - Update headers so the PDF endpoint can be embedded by the app origin.
      - Prefer CSP frame-ancestors; avoid conflicting X-Frame-Options.
   B) Authentication in iframes / cookie SameSite:
      - If the PDF route requires cookies and API is on a different subdomain/domain, Chrome may not send cookies in an iframe.
      - If Network shows 302 to login or 401, fix by:
        - serving the PDF from the same origin as the app (proxy route), OR
        - adjusting cookies to SameSite=None; Secure (if cross-site embedding is required), OR
        - using a short-lived signed URL / token for the PDF request.
   C) Correct PDF streaming support:
      - Ensure response headers include:
        - Content-Type: application/pdf
        - Content-Disposition: inline; filename="..."
        - Content-Length (if feasible)
        - Accept-Ranges: bytes and correct handling of Range requests (recommended)
   D) Cross-origin isolation headers:
      - If present, check interaction of COOP/COEP/CORP headers that may block embedding.

3) Implement the fix in code.
   - If the frontend and backend are different origins, implement a same-origin proxy endpoint like:
     /documents/:id/view  (served by the app origin)
     which fetches the PDF bytes server-to-server and streams them to the iframe.

4) Add a small automated verification:
   - Log the final response headers for the PDF endpoint in dev.
   - Confirm in Chrome:
     - no console frame errors
     - network status is 200 (not 302/401)
     - iframe shows the PDF

Deliverables:
- A brief explanation of the root cause found (based on console + network evidence)
- The exact code changes (backend headers and/or proxy route, cookie config if needed)
- Any frontend changes needed (iframe URL, auth token use, etc.)

Important:
Do NOT propose “just use base64 in the browser” or “convert differently” as the primary fix — focus on iframe blocking causes (CSP/X-Frame-Options, redirects/auth cookies, cross-origin policy headers) and implement the concrete server/header/auth changes.
